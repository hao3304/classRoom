query GetDmas {
  dmas {
    id
    level
    parent
    status
    area
    square
    pipe
    cust
    weight
    created
    changed
    o_station {
      id
      code
      model
      name
      area
      addr
      position
      weight
      type
      time
      sensors {
        id
        name
        unit
        value
        time
        y_acc: o_day(offset: -1) {
          acc
        }
        t_acc: o_day(offset: 0) {
          acc
        }
      }
    }
  }
}

query GetDma($id: String!) {
  dma(id: $id) {
    id
    level
    parent
    square
    pipe
    cust
    status
    weight
    created
    changed
    o_station {
      code
      model
      name
      area
      addr
      position
      weight
      type
    }
    o_dma_topos {
      id
      dma
      station
      type
      status
      weight
      o_station {
        name
      }
    }
  }
}

mutation DmaCreate($form: NewDma!) {
  dma_create(form: $form) {
    id
  }
}

mutation DmaUpdate($id: String!, $form: UpdDma!) {
  dma_update(id: $id, form: $form)
}

mutation DmaRemove($id: String!) {
  dma_remove(id: $id)
}

mutation DmaTopoSave($dma: String!, $topos: [FrmDmaTopo!]) {
  dma_topo_save(dma: $dma, topos: $topos)
}
